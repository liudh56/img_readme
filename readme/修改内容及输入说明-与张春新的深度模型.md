# 修改内容

## 1、输入参数改变

t(nl) 每层层底沉积年代(37行)
土水特征参数a、m、n随沉积年代模型参数(54、55行)
内摩擦角     粘聚力       重度   随沉积年代模型非线性(56、57行)
水位位置（坡顶为0，y方向为负值）(58行)
非饱和抗剪强度公式中κ(59行)

## 2、输入所有节点孔压(53行)

```fortran
READ(12,*)inpore  !所有节点孔压
```

## 3、输出prop(nprops,np_types)(98-85行)

```fortran
nprops=10 !分别为内摩擦角、粘聚力、剪胀角、干密度、弹模、泊松比、a、m、n、饱和体积含水率

CALL g_prop(a1,a2,a3,a4,b1,a5,a6,a7,b2,b3,b4,c1,c2,c3,c4,d1,c5,c6,c7,d2,d3,d5,la_rwt1,   &
  la_rwt2,lm_rwt1,lm_rwt2,ln_rwt1,ln_rwt2,theta_r,zero,gam_w,np_types,nprops,nl,ny,t,   &
  nx1,nx2,ny1,ny2,nye,nod,nels,g_num,num,nn,h,inpore,prop,prop1,theta_w,pa_rwt1,        &
  pa_rwt2,pm_rwt1,pm_rwt2,pm_rwt3,pn_rwt1,pn_rwt2,pn_rwt3)
```

```
首先，求prop1：一列单元的参数(其中重度为干重度)
其次，求prop：所有单元参数(其中重度为干重度)
之后，判断孔压正负，计算天然体积含水率/使用饱和体积含水率
最后，利用含水率计算天然重度
```

## 4、输出surf(2,nosurf) (79行)

根据水位计算水位线上各节点坐标

```fortran
call WTpoints(zero,nx1,nx2,nn,ny1,ny2,nod,nels,g_num,gam_w,inpore,g_coord,nosurf,surf,ndim)
```

## 5、绘制网格划分时，将所有网格设置为具有不同参数(81-85行)

## 6、坡外水位所导致的重度荷载的变化，输出gravlo(0:neq) (119行)

```fortran
CALL water_loads
```

## 7、对于孔压inpore的处理

```
首先，单元循环内提取该单元所有节点的孔压(172行)
其次，利用Vanapalli公式计算吸应力suc_sig (174-176行)
之后，高斯循环中计算高斯点吸应力pore (181行)
最后，修正正应力(186-188行)
```

## 8、若收敛，对应力进行恢复(193-195行)

## 9、奇偶分层下的变形图(224行)

```fortran
CALL dismsh
```

<br/>

<br/>

# 输入说明

```fortran
w1   s1   w2   h1   h2   nl !分层数  用于划分黄土古土壤序列情况
8    4     4    14   8    4
h(nl) !每层层底距坡顶距离
4   12   16   22
ny(nl) !每层划分网格数
2    4    2   3
t(nl) !每层层底沉积年代
8   12   18   33
nx1    nx2   ny1    ny2
4       2     7    4
!土水特征参数a、m、n随沉积年代模型参数
0.044     7.062      -0.0000724      0.3318              -0.000161      1.5092
24.4397   -113.0186   0.000000176   -0.0000591   0.2077   0.000000331   -0.000128   1.2664
!内摩擦角     粘聚力        剪胀角     重度                    弹模 泊松比  比重
0  18.5       0.17    0      0.0        1.25   0.018    0.4623   1.0e5   0.3  2.71
0  18.5       3.56   500     0.0        1.39   0.0035   0.6489   1.0e5   0.3  2.72
!水位位置（坡顶为0，y方向为负值）
-100
!非饱和抗剪强度公式中κ
1.4
!收敛准则  计算次数
0.0001   500
!折减次数
9
!折减系数
0.8  0.9  1.0  1.1  1.2  1.3  1.4  1.5  1.6
```